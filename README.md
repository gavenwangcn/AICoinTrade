# AICoinTrade

面向加密资产的 AI 量化交易控制台，提供可视化驾驶舱、模型管理与自动化交易执行能力。

## 功能概览

- **智能交易驾驶舱**：通过沉浸式 3D 风格界面实时展示模型、行情、组合及回测表现，支持一键执行或暂停特定模型。
- **多模型调度**：可为不同 API 提供方配置独立的 AI 模型，支持手动触发交易周期、记录指令对话与执行日志。@app.py#235-332 @trading_engine.py#20-86
- **多源行情聚合**：整合 Binance、CoinGecko、CoinCap 等数据源并带有缓存、限流与熔断逻辑，非交易时段会回落至最近一次收盘价。@market_data.py#25-280
- **资金与仓位管理**：跟踪账户资产、持仓、交易记录及收益率，支持聚合视图与排行榜。@app.py#299-400
- **自动化风控执行**：TradingEngine 结合 AI 决策与风险预算，限制最大持仓并计算手续费、净收益，自动写入数据库。@trading_engine.py#117-270
- **灵活配置**：通过 REST API 管理虚拟币白名单、交易频率、手续费、自动交易时间窗以及 API 提供方. @app.py#118-234 @app.py#539-573

## 快速开始

1. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

2. **初始化数据库（SQLite）**
   ```bash
   python -c "from database import Database; Database().init_db()"
   ```

3. **配置 API 提供方**
   - 编辑 `config.py`（或复制/调整 `config_example.py`）。
   - 在网页「API提供方」对话框中填写各模型所需的 `api_url`、`api_key`、模型名称。

4. **启动服务**
   ```bash
   python app.py
   ```
   默认监听 `http://127.0.0.1:5000`，前端即为沉浸式控制台。

## 运行说明

- 初次进入请先在「虚拟币配置」中添加要跟踪的币种（用于行情订阅与持仓统计）。
- 「执行交易」会触发所选模型的交易周期，并自动重新开启该模型的自动交易状态。@app.py#415-454
- 自动化交易循环会按照「系统设置」中的频率与时间窗运行，必要时可通过「关闭交易」暂停单个模型。@app.py#455-513
- 所有决策 prompt、AI 回复与交易执行细节都会写入数据库，便于追踪与复盘。@trading_engine.py#33-75

## 注意事项

- Binance / CoinGecko 等第三方 API 可能对调用频率、地区访问有要求，请根据实际情况配置代理或密钥。@market_data.py#281-390
- 若部署至公网，请为 Flask 应用增加认证、限流与 HTTPS 代理，确保 API Key 不被泄露。
- 本项目仅用于技术演示，涉及真实资金前请做好合规与风控评估。
